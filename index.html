<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tpass å›é¥‹è¨ˆç®—æ©Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn-calculate {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s;
        }

        .btn-calculate:hover {
            transform: translateY(-2px);
        }

        .results {
            display: none;
            margin-top: 30px;
        }

        .result-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
        }

        .result-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .result-item:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 1.1em;
        }

        .discount-info {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .discount-info h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .discount-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .discount-table th,
        .discount-table td {
            padding: 10px;
            text-align: center;
            border: 1px solid #ddd;
        }

        .discount-table th {
            background: #f0f0f0;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            .content {
                padding: 20px;
            }
            .header h1 {
                font-size: 2em;
            }
            .discount-info > div {
                grid-template-columns: 1fr !important;
            }
        }

        .savings-positive {
            color: #28a745 !important;
            font-weight: bold;
        }

        .savings-negative {
            color: #dc3545 !important;
            font-weight: bold;
        }

        .best-option {
            background: #d4edda !important;
            border-color: #28a745 !important;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš‡ Tpass å›é¥‹è¨ˆç®—æ©Ÿ</h1>
            <p>æ¯”è¼ƒ Tpass 1.0ã€Tpass 2.0 èˆ‡å°åŒ—æ·é‹å¸¸å®¢å„ªæƒ </p>
        </div>

        <div class="content">
            <!-- æŠ˜æ‰£è³‡è¨Š -->
            <div class="discount-info">
                <h3>ğŸ“Š å›é¥‹æ©Ÿåˆ¶èªªæ˜</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                    <div>
                        <h4>Tpass 1.0 æœˆç¥¨</h4>
                        <table class="discount-table">
                            <tr>
                                <th>æ–¹æ¡ˆ</th>
                                <th>åƒ¹æ ¼</th>
                            </tr>
                            <tr>
                                <td>30å¤©ç„¡é™æ­ä¹˜</td>
                                <td>$1,200</td>
                            </tr>
                        </table>
                    </div>
                    <div>
                        <h4>Tpass 2.0 å›é¥‹</h4>
                        <table class="discount-table">
                            <tr>
                                <th>æ­ä¹˜æ¬¡æ•¸</th>
                                <th>å›é¥‹æ¯”ä¾‹</th>
                            </tr>
                            <tr>
                                <td>11~30æ¬¡</td>
                                <td>15%</td>
                            </tr>
                            <tr>
                                <td>31æ¬¡ä»¥ä¸Š</td>
                                <td>30%</td>
                            </tr>
                        </table>
                    </div>
                    <div>
                        <h4>å°åŒ—æ·é‹å¸¸å®¢å„ªæƒ </h4>
                        <table class="discount-table">
                            <tr>
                                <th>å‰æœˆæ­ä¹˜æ¬¡æ•¸</th>
                                <th>å›é¥‹æ¯”ä¾‹</th>
                            </tr>
                            <tr>
                                <td>11~20æ¬¡</td>
                                <td>5%</td>
                            </tr>
                            <tr>
                                <td>21~40æ¬¡</td>
                                <td>10%</td>
                            </tr>
                            <tr>
                                <td>41æ¬¡ä»¥ä¸Š</td>
                                <td>15%</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <!-- è¼¸å…¥å€åŸŸ -->
            <div class="input-section">
                <h3>ğŸ’³ è¨ˆç®—åƒæ•¸è¨­å®š</h3>
                <div class="input-group">
                    <label for="ticketPrice">å–®ç¨‹ç¥¨åƒ¹ (å…ƒ)</label>
                    <select id="ticketPrice">
                        <option value="">è«‹é¸æ“‡ç¥¨åƒ¹</option>
                        <option value="20">$20</option>
                        <option value="25">$25</option>
                        <option value="30">$30</option>
                        <option value="35">$35</option>
                        <option value="40">$40</option>
                        <option value="45">$45</option>
                        <option value="50">$50</option>
                        <option value="55">$55</option>
                        <option value="60">$60</option>
                        <option value="65">$65</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="workDays">æ¯æœˆä¸Šç­å¤©æ•¸</label>
                    <input type="number" id="workDays" placeholder="ä¾‹å¦‚ï¼š22" min="1" max="31">
                    <small style="color: #666; margin-top: 5px; display: block;">
                        * ç³»çµ±æœƒè‡ªå‹•è¨ˆç®—ä¾†å›æ¬¡æ•¸ (ä¸Šç­å¤©æ•¸ Ã— 2)
                    </small>
                </div>

                <button class="btn-calculate" onclick="calculateCosts()">
                    ğŸ§® é–‹å§‹è¨ˆç®—
                </button>
            </div>

            <!-- çµæœé¡¯ç¤ºå€åŸŸ -->
            <div class="results" id="results">
                <div class="result-card">
                    <div class="result-title">ğŸ“ˆ è¨ˆç®—çµæœ</div>
                    <div id="calculationDetails"></div>
                </div>

                <div class="result-card">
                    <div class="result-title">ğŸ’° è²»ç”¨æ¯”è¼ƒ</div>
                    <div id="costComparison"></div>
                </div>

                <div class="result-card">
                    <div class="result-title">ğŸ¯ æœ€ä½³é¸æ“‡å»ºè­°</div>
                    <div id="recommendation"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function calculateCosts() {
            const ticketPrice = parseInt(document.getElementById('ticketPrice').value);
            const workDays = parseInt(document.getElementById('workDays').value);

            if (!ticketPrice || !workDays) {
                alert('è«‹å¡«å¯«æ‰€æœ‰å¿…è¦è³‡è¨Šï¼');
                return;
            }

            // è¨ˆç®—æ¯æœˆæ­ä¹˜æ¬¡æ•¸ (ä¾†å›)
            const monthlyRides = workDays * 2;
            
            // è¨ˆç®—åŸåƒ¹
            const originalCost = ticketPrice * monthlyRides;

            // è¨ˆç®— Tpass 1.0 (å›ºå®šåƒ¹æ ¼)
            const tpass1Cost = 1200;
            const tpass1Savings = originalCost > tpass1Cost ? originalCost - tpass1Cost : 0;

            // è¨ˆç®— Tpass 2.0 å›é¥‹
            let tpassDiscount = 0;
            if (monthlyRides >= 11 && monthlyRides <= 30) {
                tpassDiscount = 0.15; // 15%
            } else if (monthlyRides >= 31) {
                tpassDiscount = 0.30; // 30%
            }
            const tpass2Cost = originalCost * (1 - tpassDiscount);
            const tpass2Savings = originalCost - tpass2Cost;

            // è¨ˆç®—å°åŒ—æ·é‹å¸¸å®¢å„ªæƒ  (å‰æœˆæ¬¡æ•¸å½±éŸ¿ç•¶æœˆå›é¥‹)
            let metroDiscount = 0;
            if (monthlyRides >= 11 && monthlyRides <= 20) {
                metroDiscount = 0.05; // 5%
            } else if (monthlyRides >= 21 && monthlyRides <= 40) {
                metroDiscount = 0.10; // 10%
            } else if (monthlyRides >= 41) {
                metroDiscount = 0.15; // 15%
            }
            const metroRebate = Math.round(originalCost * metroDiscount); // å››æ¨äº”å…¥
            const metroCost = originalCost - metroRebate;
            const metroSavings = metroRebate;

            // é¡¯ç¤ºçµæœ
            displayResults(ticketPrice, workDays, monthlyRides, originalCost, 
                          tpass1Cost, tpass1Savings,
                          tpass2Cost, tpass2Savings, tpassDiscount,
                          metroCost, metroSavings, metroDiscount);
        }

        function displayResults(ticketPrice, workDays, monthlyRides, originalCost, 
                              tpass1Cost, tpass1Savings,
                              tpass2Cost, tpass2Savings, tpass2Discount,
                              metroCost, metroSavings, metroDiscount) {
            
            // æ‰¾å‡ºæœ€ä¾¿å®œçš„æ–¹æ¡ˆ
            const costs = [
                { name: 'Tpass 1.0', cost: tpass1Cost, savings: tpass1Savings },
                { name: 'Tpass 2.0', cost: Math.round(tpass2Cost), savings: Math.round(tpass2Savings) },
                { name: 'å°åŒ—æ·é‹å¸¸å®¢å„ªæƒ ', cost: metroCost, savings: metroSavings },
                { name: 'åŸåƒ¹', cost: originalCost, savings: 0 }
            ];

            costs.sort((a, b) => a.cost - b.cost);
            const bestOption = costs[0];
            const secondOption = costs[1];

            // è¨ˆç®—è©³æƒ…
            const detailsHTML = `
                <div class="result-item">
                    <span>å–®ç¨‹ç¥¨åƒ¹:</span>
                    <span>$${ticketPrice}</span>
                </div>
                <div class="result-item">
                    <span>æ¯æœˆä¸Šç­å¤©æ•¸:</span>
                    <span>${workDays} å¤©</span>
                </div>
                <div class="result-item">
                    <span>æ¯æœˆæ­ä¹˜æ¬¡æ•¸:</span>
                    <span>${monthlyRides} æ¬¡ (ä¾†å›)</span>
                </div>
                <div class="result-item">
                    <span>åŸåƒ¹ç¸½é¡:</span>
                    <span>$${originalCost.toLocaleString()}</span>
                </div>
            `;

            // è²»ç”¨æ¯”è¼ƒ
            const comparisonHTML = `
                <div class="result-item ${originalCost === bestOption.cost ? 'best-option' : ''}">
                    <span>åŸåƒ¹ (ç„¡å„ªæƒ ):</span>
                    <span>$${originalCost.toLocaleString()}</span>
                </div>
                <div class="result-item ${tpass1Cost === bestOption.cost ? 'best-option' : ''}">
                    <span>Tpass 1.0 (æœˆç¥¨åˆ¶):</span>
                    <span>$${tpass1Cost.toLocaleString()} <small style="color: ${tpass1Savings > 0 ? '#28a745' : '#dc3545'};">(${tpass1Savings > 0 ? '-' : '+'}$${Math.abs(tpass1Savings).toLocaleString()})</small></span>
                </div>
                <div class="result-item ${Math.round(tpass2Cost) === bestOption.cost ? 'best-option' : ''}">
                    <span>Tpass 2.0 (${(tpass2Discount * 100).toFixed(0)}% å›é¥‹):</span>
                    <span>$${Math.round(tpass2Cost).toLocaleString()} <small style="color: #28a745;">(-$${Math.round(tpass2Savings).toLocaleString()})</small></span>
                </div>
                <div class="result-item ${metroCost === bestOption.cost ? 'best-option' : ''}">
                    <span>å°åŒ—æ·é‹å¸¸å®¢å„ªæƒ  (${(metroDiscount * 100).toFixed(0)}% å›é¥‹):</span>
                    <span>$${metroCost.toLocaleString()} <small style="color: #28a745;">(-$${metroSavings.toLocaleString()})</small></span>
                </div>
            `;

            // å»ºè­°
            let recommendation = '';
            
            if (bestOption.name === 'Tpass 1.0') {
                const savingsVsSecond = secondOption.cost - bestOption.cost;
                recommendation = `
                    <div style="background: #d4edda; padding: 15px; border-radius: 8px; border-left: 4px solid #28a745;">
                        <strong>ğŸ† å»ºè­°ä½¿ç”¨ Tpass 1.0 æœˆç¥¨</strong><br>
                        ç›¸è¼ƒæ–¼æ¬¡ä¾¿å®œçš„ã€Œ${secondOption.name}ã€ï¼Œæ¯æœˆå¯çœä¸‹ <strong>$${savingsVsSecond.toLocaleString()}</strong><br>
                        <small>å›ºå®š $1,200 çš„æœˆç¥¨åˆ¶åº¦æœ€åˆ’ç®—ï¼è€Œä¸”å¯ç„¡é™æ­ä¹˜å¤šç¨®å¤§çœ¾é‹è¼¸å·¥å…·ã€‚</small>
                    </div>
                `;
            } else if (bestOption.name === 'Tpass 2.0') {
                const savingsVsSecond = secondOption.cost - bestOption.cost;
                recommendation = `
                    <div style="background: #cce5ff; padding: 15px; border-radius: 8px; border-left: 4px solid #007bff;">
                        <strong>ğŸ† å»ºè­°ä½¿ç”¨ Tpass 2.0</strong><br>
                        ç›¸è¼ƒæ–¼æ¬¡ä¾¿å®œçš„ã€Œ${secondOption.name}ã€ï¼Œæ¯æœˆå¯çœä¸‹ <strong>$${Math.round(savingsVsSecond).toLocaleString()}</strong><br>
                        <small>Tpass 2.0 çš„å›é¥‹ç‡æœ€é©åˆæ‚¨çš„æ­ä¹˜é »ç‡ï¼</small>
                    </div>
                `;
            } else if (bestOption.name === 'å°åŒ—æ·é‹å¸¸å®¢å„ªæƒ ') {
                const savingsVsSecond = secondOption.cost - bestOption.cost;
                recommendation = `
                    <div style="background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107;">
                        <strong>ğŸ† å»ºè­°ä½¿ç”¨å°åŒ—æ·é‹å¸¸å®¢å„ªæƒ </strong><br>
                        ç›¸è¼ƒæ–¼æ¬¡ä¾¿å®œçš„ã€Œ${secondOption.name}ã€ï¼Œæ¯æœˆå¯çœä¸‹ <strong>$${Math.round(savingsVsSecond).toLocaleString()}</strong><br>
                        <small>å°æ‚¨çš„æ­ä¹˜é »ç‡ä¾†èªªï¼Œå¸¸å®¢å„ªæƒ æœ€åˆ’ç®—ï¼</small>
                    </div>
                `;
            } else {
                recommendation = `
                    <div style="background: #f8d7da; padding: 15px; border-radius: 8px; border-left: 4px solid #dc3545;">
                        <strong>ğŸ’¡ å»ºè­°è€ƒæ…®å¢åŠ æ­ä¹˜é »ç‡</strong><br>
                        ç›®å‰çš„æ­ä¹˜é »ç‡ä¸‹ï¼Œä½¿ç”¨åŸåƒ¹å¯èƒ½æ¯”è¼ƒåˆ’ç®—<br>
                        <small>æˆ–è€ƒæ…® Tpass 1.0 æœˆç¥¨ï¼Œå¯äº«å—ç„¡é™æ­ä¹˜çš„ä¾¿åˆ©æ€§ã€‚</small>
                    </div>
                `;
            }

            // åŠ å…¥è©³ç´°åˆ†æ
            let detailedAnalysis = `
                <div style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                    <strong>ğŸ’° è©³ç´°åˆ†æï¼š</strong><br>
                    <ul style="margin: 10px 0; padding-left: 20px;">
            `;

            if (originalCost <= 1200) {
                detailedAnalysis += `<li>æ‚¨çš„æœˆæ­ä¹˜è²»ç”¨è¼ƒä½ï¼ˆ$${originalCost}ï¼‰ï¼ŒTpass 1.0 æœˆç¥¨ï¼ˆ$1,200ï¼‰å¯èƒ½ä¸åˆ’ç®—</li>`;
            } else {
                detailedAnalysis += `<li>æ‚¨çš„æœˆæ­ä¹˜è²»ç”¨è¼ƒé«˜ï¼ˆ$${originalCost}ï¼‰ï¼ŒTpass 1.0 æœˆç¥¨å¾ˆåˆ’ç®—</li>`;
            }

            if (monthlyRides >= 31) {
                detailedAnalysis += `<li>æ­ä¹˜æ¬¡æ•¸é” ${monthlyRides} æ¬¡ï¼Œå¯äº« Tpass 2.0 æœ€é«˜ 30% å›é¥‹</li>`;
            } else if (monthlyRides >= 11) {
                detailedAnalysis += `<li>æ­ä¹˜æ¬¡æ•¸ ${monthlyRides} æ¬¡ï¼Œå¯äº« Tpass 2.0 çš„ 15% å›é¥‹</li>`;
            }

            if (monthlyRides >= 41) {
                detailedAnalysis += `<li>æ­ä¹˜æ¬¡æ•¸é” ${monthlyRides} æ¬¡ï¼Œå¯äº«æ·é‹å¸¸å®¢å„ªæƒ æœ€é«˜ 15% å›é¥‹</li>`;
            }

            detailedAnalysis += `
                    </ul>
                </div>
            `;

            recommendation += detailedAnalysis;

            // æ›´æ–° DOM
            document.getElementById('calculationDetails').innerHTML = detailsHTML;
            document.getElementById('costComparison').innerHTML = comparisonHTML;
            document.getElementById('recommendation').innerHTML = recommendation;
            document.getElementById('results').style.display = 'block';

            // æ»¾å‹•åˆ°çµæœå€åŸŸ
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // é é¢è¼‰å…¥æ™‚è¨­å®šé è¨­å€¼
        window.addEventListener('load', function() {
            document.getElementById('workDays').value = 22; // é è¨­22å€‹å·¥ä½œå¤©
        });
    </script>
</body>
</html>
